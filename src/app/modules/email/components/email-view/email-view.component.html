
<button (click)="next()" mat-stroked-button [disabled]="disabledNext">
  next
</button>
<button (click)="previous()" mat-stroked-button>
  previous
</button>

<div *ngIf="email !== undefined">
  <mat-card class="email-display-card">
    <mat-card-title>Subject: {{ email.payload.subject }}</mat-card-title>

    <div *ngFor="let signature of signatureResults">
        Signature (Key-ID: {{ signature.keyId }})<br/>
        Signature: {{ signature.signatureVerified ? 'OK' : 'Not OK' }} {{ signature.signatureErrorMessage !== undefined ? '(' + signature.signatureErrorMessage + ')' : '' }} <br/>
        Signature Date: {{ signature.signedAt }} <br/>
        OidcÂ²-chain: {{ signature.oidc2ChainVerified ? 'OK' : 'Not OK' }} {{ signature.oidc2ErrorMessage !== undefined ? '(' + signature.oidc2ErrorMessage + ')' : '' }} <br/>
    </div>
    <div *ngIf="encrypted">
      Encrypted!
    </div>

    <div *ngIf="publicKey !== undefined">
      PGP-Key: <br/>
      Fingerprint: {{ publicKey.getFingerprint() }} <br/>
      KeyID: {{ publicKey.getKeyID().toHex() }} <br/>
      User ID: {{ publicKey.getUserIDs() }} <br/>
      CreationTime: {{ publicKey.getCreationTime() }} <br>
    </div>
    
    <mat-card-subtitle>From: {{email.payload.from }}</mat-card-subtitle>
    <mat-card-subtitle>To: {{ email.payload.to }}</mat-card-subtitle>
    <mat-card-subtitle>Date: {{ email.payload.date }}</mat-card-subtitle>
    
    <mat-card-content class="email-display-content">

      <div [innerHTML]="email.payload.displayText"></div>
    </mat-card-content>

    <mat-list>
      <div mat-subheader>Attachments</div>
      <div *ngFor="let attachment of email.payload.attachments">
        <a [href]="attachment.getDownloadUrl()"
          [download]="attachment.name">
          {{attachment.name}}
        </a>
      </div>
    </mat-list>
  </mat-card>
</div>
<div *ngIf="email === undefined">
  No Email to show
</div>


